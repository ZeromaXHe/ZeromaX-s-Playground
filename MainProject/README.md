# 灵感

1. 自发光 Shader 可以参考[全息图着色器](https://www.bilibili.com/video/BV18e41197Yz)，用来做地球暗面的城市灯光？



# TODO

## 旧功能

### 我开发的

- [ ] 重复生成星球任务的互斥检测

### 教程实现

- [ ] 确认高程视野的逻辑是否正确

### BUG FIX

- [ ] **网格生成**：目前地块连接和角落三角间存在接缝，估计是浮点数精度加上计算方向不同导致的
- [ ] **网格生成**：目前海面可能出现从中心到 3/4 边的接缝
- [ ] **Shader**：球面 UV 的映射

## 新功能



- [ ] **GUI**：设置不可探索地块
- [ ] **GUI**：编辑地形前的预览效果（透明、高优先级显示）
- [ ] **GUI**：悬浮在地块上一定时间后显示的信息框
- [ ] **GUI**：相机移动时显示南北极指示，经纬度指示



- [ ] **动态加载**：特征考虑如何转为 MultiMesh，实现降低 Draw call
- [ ] **动态加载**：根据分块与相机间的位置关系，动态懒加载网格，而不是一次性全部生成。
- [ ] **动态加载**：地形的 LOD？生成远距离观察或未来 2D、3D 地图切换为小地图后的低分辨率地形，省略阶梯等细节



- [ ] **DGGS**：地块经纬度（地形生成需要用）
- [ ] **DGGS**：求最短路径上的所有地块（划线）



- [ ] **小地图**：摄像头位置和朝向指示
- [ ] **小地图**：点击小地图跳转
- [ ] **小地图**：拉伸分辨率时，改变小地图大小
- [ ] **小地图**：小地图按照当前位置移动 X 轴到居中
- [ ] **小地图**：切换正二十面体展开方式（平铺还是中心六向）
- [ ] **小地图**：切换2D、3D大小地图功能



- [ ] **美术效果**：体积云
- [ ] **美术效果**：大气层
- [ ] **美术效果**：更好看的天空盒（现在的太黑了）
- [ ] **美术效果**：水面法线贴图，波浪效果



## 已完成

### 2025-03-08

- [x] **单位寻路**：当前会有优先队列 -1 数组越界的 bug
- [x] **GUI**：编辑模式下显示地块 ID、坐标

### 2025-03-06

- [x] **特征视野**：instance uniform 数量太多报错，需要改成 MultiMesh 的实现？（实际上改成了控制 Visible）

- [x] **单位寻路**：单位移动中途，继续移动单位的 bug——录视频时发现：已经走过的地方会留下单位霸占位置，也可能是 AStar3D 更新逻辑错了（其实是单位漏设置地块 Id 了）
- [x] **单位寻路**：探索视野外的单位寻路（貌似没有被禁止）——需要按照原教程方式自己实现搜索？而不是 AStar3D？（确实放弃了 AStar3D，但原因其实是没有检查地块的探索属性）
- [x] 鼠标中键移动鼠标
- [x] **DGGS**：求任意两地块最短距离（可视范围要用）

### 2025-03-05

- [x] 更新 Godot 4.4（阿牟说的动画播放器 bug、生命周期）
- [x] 4.4 怎么设置 Jolt 物理？(设置器里可以改) 
- [x] 墙面的可见性（写个新 Shader）
- [x] 特征的可见性（Shader 的 instance uniform）
- [x] 简易小地图